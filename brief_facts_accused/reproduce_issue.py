import logging
import sys
from extractor import extract_accused_info, extract_accused_names_pass1

# Configure logging to stdout
logging.basicConfig(stream=sys.stdout, level=logging.DEBUG)

input_text = """
IN THE COURT OF THE HONOURABLE VII Addl METROPOLITAN MAGISTRATE AT MEDCHAL, CYBERABAD.HONOURED SIR,
          Today i.e. on 23.11.2025 at 1830 hrs received a complaint from Sri. M. Shashivardhan Reddy SIP of PS Shamirpet, # 8712554144, which read as follows
                                (Original complaint is enclosed here with)
Facts of the case are that, Today, i.e., on 23.11.2025 at about 1015hours, while complainant was performing his routine duties, he received credible information that 5 male persons are illegally possessing Ganja and coming towards ORR Rotary-I, Shamirpet and they will come in between 1300hrs and 1330hrs. Believing the information to be true and reliable, he informed his superior officer, the Inspector of Police, PS Shamirpet, under Section 42(2) of the NDPS Act. complainant made a GD entry regarding the information received, reduced it into writing, and sent the same to his superior officer.Subsequently,he deputed PC-12843 with Requisition No. 293/ OW/ SMPT/ CYB/ 2025, dated 23.11.2025, to the Clues Team Office, camped at the Office of the Asst. Commissioner of Police, Pet Basheerabad Division, with instructions to report to PS Shamirpet for assistance. complainant also addressed a letter to the Tahsildar, Shamirpet Mandal vide No. 294/OW/SMPT/CYB/2025, dated 23.11.2025, through PC-11451, requesting the deputation of two revenue officers to act as mediating panchas.At about 1200 hours, Sri B Chinnesh, CSO, SK Vali (SPO), SPO Kulayi Reddy of the Clues Team arrived at the Police Station in a Bolero vehicle, bearing registration number TS 09 PA 4436. At around 1215 hours, two panchas — (1) Sri. Shaganti Sattaiah 2) Sri Neerudu Yadagiri also arrived at the Police Station. I briefed the mediators about the information received and requested them to act as panchas during the search and seizure proceedings, to which they voluntarily consented.As per the instructions of his superior officer, complainant, along with his staff 1)  S Arun Kumar HC 2702, 2) J Somla PC 12843, 3) M Yadaiah PC 11451, 4) T Sidheshwar PC 9819, 5) N Shiva Kumar PC 11573, 6) C Praveen PC 10406, 7) M Rahmath PC 11384, 8) K Ravi PC 11375, 9) Thirupathi HG 941 , the two panchas, and the Clues Team, left the Police Station at 1230 hours in Police Vehicles 1) Innova Reg. No. TS 09 PA 0918, 2) Innova Br no TS 09 PA 5420, 3) Bolero Br no TS 09 PA 3417, while the Clues Team followed in the Bolero (Reg. No. TS 09 PA 4436). They carried a laptop, printer, weighing machine, and packing material. A GD entry was made prior to departure.They reached ORR Rotary-I, Shamirpet at about 1250 hours, and took strategic positions to apprehend the suspects. Complainant had deployed PC T. Sidheshwar (civil dress) near ORR Rotary-I to keep a close watch. While they are waiting at the service road towards keesara, at around 13:00hrs, PC Sidheshwar alerted us that 5 persons were approaching from ORR Rotary-I towards the Keesara service road carrying a bag, and based on the credible information received, they were suspected to be the persons transporting prohibited Ganja. Immediately, along with his team, he moved towards them and apprehended all the five persons and informed them of the information received and the reason for their apprehension. On questioning they disclosed their details as follows. 
1)	Mediabaena Vamshi, S/o: Srinivas, Age: 22yrs, Caste: Kapu, Occ: Auto Driver, R/o: H no 3-1-131/6 A Bhavani Nagar, Mallapur Village, Nacharam, Medchal-Malkajgiri Dist, N/o: Akkayapalem, Vishakapatnam, AP State, Cell: 7416378828, Aadhar no: 3685-6684-2035.
2)	Pesara Sairam, S/o: Ravi, Age: 26yrs, Occ: Cab Driver, Caste: Mudiraj, R/o: Ambedkar Bhavan, Vivekananda Colony, Mallapur Village, Nacharam, Medchal-Malkajgiri Dist, N/o: Narlapur Village, Tadvai, Mulugu Dist, Cell: 9100546049, Aadhar no: 7874-4413-2056.
3)	Korikana Bhanu Prasad, S/o: Appala Naidu, Age: 26yrs, Caste: Naidu, Occ: Private Job, R/o: Flat no 438 B, 7th Block, Janapriya Township, Mallapur, Nacharam, Medchal-Malkajgiri Dist, N/o: H no 2-141, Main Veedi, Singannavalasa, Srikakulam AP State, Cell: 6281436162, Aadhar no: 9062-4960-4709.
4)	Bhumiar Sahil Kumar , S/o: Murari Singh, Age: 24yrs, Occ: Student (Degree final year), Caste: Brahmin, R/o: H no 2-3-90/1, Mallapur, Nacharam, Medchal-Malkajgiri Dist, Cell: 9014941384, Aadhar no: 2831-2674-4879.
5)	Enagante Satkruth Rao, S/o: Papa Rao, Age: 21yrs, Caste: Velama, Occ: Student (Degree Final yr), R/o: Near Shiva Hotel, Mallapur (V), Nacharam, Hyderabad, N/o Lane No. 06, Jyothi Nagar, Karimnagar District, Cell: 8367744294, Aadhar no: 2851-7048-9755.
During interrogation, the complainant separated five suspects and individually questioned them. All five—1) Mediabaena Vamshi, 2) Pesara Sai Ram, 3) Korikana Bhanu Prasad, 4) Bhumiar Sahil Kumar, and 5) Enagante Satkruth Rao—voluntarily confessed to the offence and gave similar statements.All the accused are residents of Mallapur, Nacharam area, acquainted for the past 2–3 years. All are habituated to smoking cigarettes and consuming ganja. They used to visit Dhoolpet to purchase small ganja packets and smoke together.On 17.11.2025, the five planned a leisure trip to Bhadrachalam. On 20.11.2025 at about 2200 hours, they boarded a bus at Habsiguda and reached Bhadrachalam on 21.11.2025 at about 0300 hours, visited the temple and later went to a waterfall about 35–40 km away after seeing it on Instagram.At the waterfall, they saw some persons smoking ganja and purchased one packet for ₹500, consumed it there, and asked for more. One person named Sudheer approached them and said he could supply any quantity. Since ganja was not easily available in Dhoolpet, they decided to purchase more at cheaper rates, take it to Mallapur, repack into small packets, consume some and sell the rest for profit.They asked Sudheer to arrange 4 kilograms of ganja. The next afternoon, Sudheer brought two packets (2 kg each, total 4 kg) and demanded ₹7,000. All five pooled money:Sahil – ₹2000,Bhanu Prasad – ₹1500,Sai Ram – ₹1500,Vamshi – ₹1000,Satkruth Rao – ₹1000.They purchased the ganja and kept both packets in a single bag.On 23.11.2025 at about 0500 hours, Sudheer made them board a goods lorry travelling from Bhadrachalam to Hyderabad. At 1230 hours, the lorry dropped them near Shamirpet ORR Toll Gate. From there, they began walking towards Keesara Service Road with the bag containing ganja.When they reached ORR Rotary–I, Keesara Service Road, at about 1255 hours, police apprehended all five accused along with the bag containing 4 kg ganja. All five admitted their guilt.The above (contents) were stated by the accused in telugu and typed the same in Telugu on the laptop in the presence of mediators, read over again to them in telugu, and the accused stated that what the police typed in Telugu is entirely correct.Further complainant have conducted the confession cum seizure panchanama of accused in the presence of respected panchas i.e., 1) Sri. Shaganti Sathaiah, 2) Sri. Neerudi Yadagiri, During the panchanama complainant accounted the 2 Packets wrapped with brown colour tape and in the presence of the Panchas and Clues team and numbered as P1 to P2.  Both P1 & P2 were cut opened and found flowering and fruiting tops with pungent smell. Then Clues team checked the contraband and opined that the material is Ganja. On the confession of accused and the opinion of Clues team, complainant strongly believe that the material is of Ganja. Both cut opened P1 and P2 packets shifted to transparent poly ethylene covers and weighed the packets and marked as M1(2.221 kg) and M2(2.108 kg) respectively and affixed panch chits containing the signatures of panchas, accused, clues team i/c and seized officer. Further wrapped with white colour transparent Cellophane tape and the details are as follows.Thereafter both empty covers of Ganja which were marked as P1 and P2 kept in a white colour plastic bag and wrapped with transparent tape and sealed both of the edges and stitch with Lakka (Lac) duly affixing the Panch chits and marked as M3. Later the following mobile phones,1. Mediabaena Vamshi, POCO M4 Pro (Black), Mob: 7416378828, IMEI-1: 869674050124298, IMEI-2: 869674050124306.2.Pesara Sairam, OPPO F29 Pro (Black), Mob: 9100546049, IMEI-1: 866658073070276, IMEI-2: 866658073070268.3.Korikana Bhanu Prasad, iQOO 12 (White), Mob: 6281436162, IMEI-1: 862787069725074, IMEI-2: 862787069725066.4.Bhumiar Sahil Kumar, Realme 11 Pro (Black & White), Mob: 9014941384, IMEI-1: 862902060488917, IMEI-2: 862902060488909.5.Enagante Satkruth Rao, Samsung F54 (Silver), Mob: 8367744294, IMEI-1: 353521960251716, IMEI-2: 356477570251710 were kept in a Zip lock cover and marked as M4. Further complainant have seized M1 to M4 duly affixing the panch chits, accused sign and clues team i/c,The entire confession cum seizure panchanama is photographed and videographed by B Chinnesh, CSO, Clues Team, Pet Basheerabad Division by observing the procedure U/s. 63 of Bharatiya Sakhya Adhiniyam, 2023 and the same are uploaded into E-Sakshya Application, towards technical evidence.The seized material is deposited in Form-1 with Sri. R. Ramesh, ASI, In charge of Malkhana and the 5 persons are produced with a request to take necessary action in this regards simultaneously. 
Received on 23.11.2025 at 1830 hrs
        As per the contents of the above complaint, I Sri. Sri. R. Dasharath SIP registered a case in Crime No. 1022/2025 U/S.  8(C), r/w 20(b)(ii)(B) NDPS Act ,27A,29 NDPS Act and took up the investigation.
                                 SD/-
                    STATION HOUSE OFFICER
                    PS SHAMIRPET,CYBERABAD.
COPY SUBMITTED TO
The COMMISSIONER OF POLICE, 
The DCP Medchal ZONE AND
The ACP PET BASHEERABAD SUB-DIVISION for favour of information.
"""

print("Running Pass 1 Extraction...")
try:
    names = extract_accused_names_pass1(input_text)
    print(f"Pass 1 Results: {names}")
    
    if names:
        print("\nRunning Pass 2 Extraction...")
        results = extract_accused_info(input_text)
        for r in results:
            print(f"\n--- {r.full_name} ---")
            print(r.model_dump_json(indent=2))
    else:
        print("Pass 1 found no names. Checking raw output requires log inspection (enabled).")

except Exception as e:
    print(f"Error: {e}")

